<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calverse - AI Nutrition & Health</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <style>
        :root {
            --background-dark: #0A0A0A;
            --card-bg-dark: rgba(26, 26, 26, 0.65);
            --border-color-dark: rgba(42, 42, 42, 0.8);
            --text-primary-dark: #FFFFFF;
            --text-secondary-dark: #888888;

            --background-light: #F5F5F5;
            --card-bg-light: rgba(255, 255, 255, 0.65);
            --border-color-light: rgba(229, 229, 229, 0.8);
            --text-primary-light: #18181B;
            --text-secondary-light: #71717A;
            
            --primary: #FBBF24; /* Amber-400 */
            --primary-hover: #F59E0B; /* Amber-500 */
            --text-on-primary: #000000;
        }
        
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        body.overflow-hidden {
            overflow: hidden;
        }

        #parallax-bg {
            background-image: url('https://images.unsplash.com/photo-1490818387583-1baba5e638af?q=80&w=2070&auto=format&fit=crop');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            opacity: 0.08;
            transition: opacity 0.3s;
            filter: grayscale(100%);
            will-change: transform;
        }
        @media (orientation: portrait) {
            #parallax-bg {
                background-image: url('https://images.unsplash.com/photo-1498837167922-ddd27525d352?q=80&w=1887&auto=format&fit=crop');
            }
        }
        .light #parallax-bg {
            opacity: 0.16;
        }

        .glass-card {
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid;
        }

        .dark body { background-color: var(--background-dark); color: var(--text-primary-dark); }
        .dark .bg-card { background-color: var(--card-bg-dark); }
        .dark .border-card { border-color: var(--border-color-dark); }
        .dark .text-main { color: var(--text-primary-dark); }
        .dark .text-sub { color: var(--text-secondary-dark); }
        .dark .bottom-nav-inner { background: var(--card-bg-dark); border: 1px solid var(--border-color-dark); }
        .dark .nav-item-desktop.active { background-color: rgba(251, 191, 36, 0.1); color: var(--primary); }
        .dark .nav-item-mobile.active { color: var(--primary); }
        .dark .accordion-item { background-color: var(--card-bg-dark); border-color: var(--border-color-dark); }
        .dark .input-field { background-color: var(--background-dark); border-color: var(--border-color-dark); }
        .dark #settings-overlay { background-color: rgba(10, 10, 10, 0.8); backdrop-filter: blur(10px); }

        .light body { background-color: var(--background-light); color: var(--text-primary-light); }
        .light .bg-card { background-color: var(--card-bg-light); }
        .light .border-card { border-color: var(--border-color-light); }
        .light .text-main { color: var(--text-primary-light); }
        .light .text-sub { color: var(--text-secondary-light); }
        .light .bottom-nav-inner { background: var(--card-bg-light); border: 1px solid var(--border-color-light); }
        .light .nav-item-desktop.active { background-color: rgba(251, 191, 36, 0.1); color: var(--primary); }
        .light .nav-item-mobile.active { color: var(--primary); }
        .light .accordion-item { background-color: var(--card-bg-light); border-color: var(--border-color-light); }
        .light .input-field { background-color: var(--background-light); border-color: var(--border-color-light); }
        .light #settings-overlay { background-color: rgba(245, 245, 245, 0.8); backdrop-filter: blur(10px); }

        .page { display: none; }
        .page.active { display: block; }
        
        .btn-primary {
            background: linear-gradient(to right, #FBBF24, #F59E0B);
            color: var(--text-on-primary);
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px -5px rgba(251, 191, 36, 0.6);
            border: none;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px -5px rgba(251, 191, 36, 0.8); }
        .btn-primary:disabled { background: #9CA3AF; cursor: not-allowed; transform: none; box-shadow: none; }

        .nutrition-label { border: 1px solid; border-radius: 0.75rem; padding: 1.5rem; max-width: 400px; margin: auto; }
        .dark .nutrition-label { background-color: var(--card-bg-dark); border-color: var(--border-color-dark); }
        .light .nutrition-label { background-color: var(--card-bg-light); border-color: var(--border-color-light); }
        .nutrition-label h1 { font-size: 2rem; font-weight: 800; line-height: 1.2; }
        .nutrition-label .header { border-bottom: 8px solid; padding-bottom: 0.75rem; margin-bottom: 0.75rem; }
        .dark .nutrition-label .header { border-color: var(--border-color-dark); }
        .light .nutrition-label .header { border-color: var(--border-color-light); }
        .nutrition-label .item { display: flex; justify-content: space-between; align-items: baseline; padding: 0.5rem 0; border-bottom: 1px solid; }
        .dark .nutrition-label .item { border-color: var(--border-color-dark); }
        .light .nutrition-label .item { border-color: var(--border-color-light); }
        .nutrition-label .item:last-child { border-bottom: none; }
        .nutrition-label .item span:first-child { font-weight: 600; }
        .nutrition-label .item .indent { margin-left: 1.5rem; }
        .nutrition-label .dv { font-weight: 800; }
        .nutrition-label .footer { border-top: 4px solid; padding-top: 0.75rem; margin-top: 0.75rem; }
        .dark .nutrition-label .footer { border-color: var(--border-color-dark); }
        .light .nutrition-label .footer { border-color: var(--border-color-light); }
        
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out; }
        
        .ai-content h3 { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-top: 1.5rem; margin-bottom: 1rem; }
        .ai-content ul { list-style-type: none; padding-left: 0; }
        .ai-content li { margin-bottom: 0.5rem; display: flex; align-items: flex-start; }
        .ai-content li::before { content: 'âœ“'; color: var(--primary); font-weight: bold; margin-right: 0.75rem; margin-top: 0.125rem; }
        
        #settings-overlay { transition: transform 0.3s ease-in-out; }
        
        #custom-modal { display: none; }
        #custom-modal.show { display: flex; }

        .skeleton { animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .skeleton-text { height: 1em; }
        .skeleton-title { height: 2.5rem; width: 60%; }
        .skeleton-line { height: 1.25rem; }

        ::-webkit-scrollbar { width: 8px; }
        .dark ::-webkit-scrollbar-track { background: var(--background-dark); }
        .light ::-webkit-scrollbar-track { background: var(--background-light); }
        ::-webkit-scrollbar-thumb { background: #4A5568; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #718096; }

        #preloader {
            position: fixed;
            inset: 0;
            background-color: #121212;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.5s ease-out;
        }
        .loader-container { display: flex; flex-direction: column; align-items: center; gap: 30px; }
        .spinner-container { width: 100px; height: 100px; position: relative; display: flex; justify-content: center; align-items: center; }
        .spinner-center { width: 80px; height: 80px; background-color: #1c1c1c; border-radius: 50%; display: flex; justify-content: center; align-items: center; position: relative; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        .orbiter { width: 18px; height: 18px; background-color: #FFC107; border-radius: 50%; position: absolute; top: 50%; left: 50%; margin: -9px; animation: orbit 3s linear infinite; }
        .icon { position: absolute; fill: #666; width: 50%; height: 50%; opacity: 0; transform: scale(0.9); transition: all 0.5s ease-in-out; animation: icon-fade 9s ease-in-out infinite; }
        .icon-recipes { animation-delay: -6s; }
        .icon-calculator { animation-delay: -3s; }
        .loader-text { display: flex; font-size: 2.5rem; font-weight: 600; font-family: 'Poppins', sans-serif; }
        .loader-text span { opacity: 0; transform: translateY(10px); background: linear-gradient(45deg, #FFC107, #FFA000); -webkit-background-clip: text; background-clip: text; color: transparent; animation: fade-up 1.8s ease-in-out infinite alternate; }
        .loader-text span:nth-child(1) { animation-delay: 0.1s; }
        .loader-text span:nth-child(2) { animation-delay: 0.2s; }
        .loader-text span:nth-child(3) { animation-delay: 0.3s; }
        .loader-text span:nth-child(4) { animation-delay: 0.4s; }
        .loader-text span:nth-child(5) { animation-delay: 0.5s; }
        .loader-text span:nth-child(6) { animation-delay: 0.6s; }
        .loader-text span:nth-child(7) { animation-delay: 0.7s; }
        .loader-text span:nth-child(8) { animation-delay: 0.8s; }
        @keyframes orbit { from { transform: rotate(0deg) translateX(50px) rotate(0deg); } to { transform: rotate(360deg) translateX(50px) rotate(-360deg); } }
        @keyframes icon-fade { 0%, 100% { opacity: 0; transform: scale(0.9); } 5% { opacity: 1; transform: scale(1); fill: #FFC107; } 11% { opacity: 1; transform: scale(1); fill: #FFC107; } 28% { opacity: 1; transform: scale(1); fill: #FFC107; } 33.33% { opacity: 0; transform: scale(0.9); fill: #666; } }
        @keyframes fade-up { from { opacity: 0.3; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        #app-container { transition: opacity 0.5s ease-in; }

        .logo-container:hover i { animation: spin-once 0.6s ease-in-out; }
        @keyframes spin-once { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .nav-item-mobile:hover i { animation: bounce-sm 0.4s ease-in-out; }
        @keyframes bounce-sm { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
    </style>
</head>
<body>
    <div id="preloader">
        <div class="loader-container">
            <div class="spinner-container">
                <div class="orbiter"></div>
                <div class="spinner-center">
                    <svg class="icon icon-meal" viewBox="0 0 57 57"><path d="M11.4,45.6 H45.6 C47.7,45.6 49.4,43.9 49.4,41.8 V39.9 C49.4,37.8 47.7,36.1 45.6,36.1 H11.4 C9.3,36.1 7.6,37.8 7.6,39.9 V41.8 C7.6,43.9 9.3,45.6 11.4,45.6 Z"/><rect x="7.6" y="29.5" width="41.8" height="6.6" rx="3.3"/><path d="M28.5,7.6 C18.2,7.6 9.5,15.2 7.9,24.7 H49.1 C47.5,15.2 38.8,7.6 28.5,7.6 Z"/><circle cx="20" cy="16" r="1.5"/><circle cx="28.5" cy="14" r="1.5"/><circle cx="37" cy="16" r="1.5"/></svg>
                    <svg class="icon icon-recipes" viewBox="0 0 57 57"><path d="M45.67,0H11.33C7.29,0,4,3.29,4,7.33V50c0,4.04,3.29,7.33,7.33,7.33h34.33c4.04,0,7.33-3.29,7.33-7.33V7.33C53,3.29,49.71,0,45.67,0z M14,8h12v4H14V8z M42,46H14v-4h28V46z M42,36H14v-4h28V36z M42,26H14v-4h28V26z"/></svg>
                    <svg class="icon icon-calculator" viewBox="0 0 57 57"><path d="M43.33,0H13.67C9.2,0,5.67,3.54,5.67,8v40c0,4.46,3.54,8,8,8h29.67c4.46,0,8-3.54,8-8V8C51.33,3.54,47.8,0,43.33,0z M22.5,48h-8v-6h8V48z M22.5,38h-8v-6h8V38z M22.5,28h-8v-6h8V28z M32.5,48h-6v-6h6V48z M32.5,38h-6v-6h6V38z M32.5,28h-6v-6h6V28z M42.5,48h-6v-6h6V48z M42.5,38h-6V22h6V38z M42.5,18h-28v-6h28V18z"/></svg>
                </div>
            </div>
            <div class="loader-text">
                <span>C</span><span>a</span><span>l</span><span>v</span><span>e</span><span>r</span><span>s</span><span>e</span>
            </div>
        </div>
    </div>

    <div id="parallax-bg" class="fixed inset-0 -z-10"></div>

    <div id="app-container" class="flex min-h-screen" style="visibility: hidden; opacity: 0;">
        <aside class="bg-card w-64 p-6 flex-col hidden md:flex border-r border-card glass-card">
            <div class="flex-grow">
                <div class="flex items-center gap-3 mb-10 logo-container">
                    <div class="bg-primary text-text-on-primary rounded-lg h-10 w-10 flex items-center justify-center"><i data-lucide="bar-chart-3"></i></div>
                    <h1 class="text-2xl font-bold text-main">Calverse</h1>
                </div>
                <nav class="flex flex-col gap-2">
                    <a href="#food" class="nav-item-desktop text-sub flex items-center gap-4 p-3 rounded-lg"><i data-lucide="layout-dashboard"></i><span class="font-semibold">Dashboard</span></a>
                    <a href="#meal" class="nav-item-desktop text-sub flex items-center gap-4 p-3 rounded-lg"><i data-lucide="utensils-crossed"></i><span class="font-semibold">Meal</span></a>
                    <a href="#recipes" class="nav-item-desktop text-sub flex items-center gap-4 p-3 rounded-lg"><i data-lucide="notebook-pen"></i><span class="font-semibold">Recipes</span></a>
                    <a href="#calculator" class="nav-item-desktop text-sub flex items-center gap-4 p-3 rounded-lg"><i data-lucide="calculator"></i><span class="font-semibold">Calculators</span></a>
                </nav>
            </div>
        </aside>

        <div class="flex-1 flex flex-col">
            <header class="p-4 md:p-8 flex items-center justify-between">
                <div class="flex items-center gap-3 md:hidden logo-container">
                     <div class="bg-primary text-text-on-primary rounded-lg h-10 w-10 flex items-center justify-center"><i data-lucide="bar-chart-3"></i></div>
                    <h1 class="text-xl font-bold text-main">Calverse</h1>
                </div>
                <h1 id="header-title" class="text-3xl font-bold hidden md:block text-main">Dashboard</h1>
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 bg-card p-2 rounded-lg glass-card"><i data-lucide="calendar" class="w-5 h-5 text-primary"></i><span id="current-date" class="text-sm font-semibold text-main"></span></div>
                    <button id="profile-avatar-btn" class="focus:outline-none"><img id="user-avatar" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=40&h=40&auto=format&fit=crop" onerror="this.onerror=null;this.src='https://placehold.co/40x40/FBBF24/000000?text=A';" alt="User Avatar" class="w-10 h-10 rounded-full object-cover border-2 border-primary"></button>
                </div>
            </header>

            <main class="flex-grow p-4 md:p-8 pb-28 md:pb-8">
                <div id="food" class="page space-y-8"></div>
                <div id="meal" class="page space-y-8"></div>
                <div id="recipes" class="page space-y-8"></div>
                <div id="calculator" class="page space-y-8"></div>
            </main>
        </div>
    </div>

    <footer class="fixed bottom-0 left-0 right-0 md:hidden z-10 p-4">
        <div class="bottom-nav-inner max-w-md mx-auto rounded-full shadow-lg glass-card">
            <nav class="flex justify-around items-center h-16 text-sub">
                <a href="#food" class="nav-item-mobile flex flex-col items-center justify-center gap-1 w-full h-full rounded-l-full"><i data-lucide="layout-dashboard"></i><span class="text-xs">Home</span></a>
                <a href="#meal" class="nav-item-mobile flex flex-col items-center justify-center gap-1 w-full h-full"><i data-lucide="utensils-crossed"></i><span class="text-xs">Meal</span></a>
                <a href="#recipes" class="nav-item-mobile flex flex-col items-center justify-center gap-1 w-full h-full"><i data-lucide="notebook-pen"></i><span class="text-xs">Recipes</span></a>
                <a href="#calculator" class="nav-item-mobile flex flex-col items-center justify-center gap-1 w-full h-full rounded-r-full"><i data-lucide="calculator"></i><span class="text-xs">Calculators</span></a>
            </nav>
        </div>
    </footer>
    
    <div id="settings-overlay" class="fixed inset-0 z-50 transform translate-x-full overflow-y-auto"></div>

    <div id="custom-modal" class="fixed inset-0 bg-black bg-opacity-60 items-center justify-center z-50 p-4">
        <div class="bg-card border-card rounded-lg p-6 w-full max-w-sm text-center transform transition-transform scale-95 glass-card">
            <h3 id="modal-title" class="text-lg font-bold text-main mb-4">Alert</h3>
            <div id="modal-message" class="text-sub mb-6 text-left"></div>
            <div id="modal-actions" class="flex gap-4">
                <button id="modal-close-btn" class="btn-primary w-full">Close</button>
            </div>
        </div>
    </div>
    
    <script type="module" src="script.js"></script>
</body>
</html>
